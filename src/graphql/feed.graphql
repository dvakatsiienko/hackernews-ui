# Query
query feed($filter: String, $skip: Int, $take: Int) {
    feed(filter: $filter, skip: $skip, take: $take) {
        count
        links {
            ...LinkFragment
        }
    }
}

# # Mutation
mutation createLink($description: String!, $url: String!) {
    createLink(description: $description, url: $url) {
        id
        url
        description
        createdAt
    }
}

mutation vote($linkId: ID!) {
    vote(linkId: $linkId) {
        id
        link {
            ...LinkFragment
        }
        user {
            id
        }
    }
}

# Subscription
subscription linkCreated {
    linkCreated {
        ...LinkFragment
    }
}

subscription postVoted {
    linkVoted {
        id
        link {
            ...LinkFragment
        }
        user {
            id
        }
    }
}

# Fragment
fragment LinkFragment on Link {
    id
    url
    description
    createdAt
    postedBy {
        id
        name
    }
    votes {
        id
        user {
            id
        }
    }
}
